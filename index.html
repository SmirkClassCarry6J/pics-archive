<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Browser</title>
    <style>
        body { font-family: Arial, sans-serif; }
        #file-list { list-style: none; padding: 0; }
        .folder { font-weight: bold; cursor: pointer; }
        .file { cursor: pointer; }
	  .folderlink { color: #0000EE; text-decoration: underline; }
    </style>
</head>
<body>
    <h1>File Browser</h1>
    <ul id="file-list"></ul>

    <script>
        let fileListData = {};  // Will hold the file list

        async function fetchFileList() {
            try {
                const response = await fetch("file-list.json");
                fileListData = await response.json();
                loadFiles("");  // Load root directory
            } catch (error) {
                console.error("Failed to load file list:", error);
            }
        }

        function loadFiles(path) {
            let folder = fileListData;
            if (path) {
                const parts = path.split("/");
                for (let part of parts) {
                    folder = folder.items.find(item => item.name === part && item.type === "folder");
                }
            }

            if (folder && folder.items) {
                displayFiles(folder.items, path);
            }
        }

        function displayFiles(items, path) {
            const fileListContainer = document.getElementById("file-list");
            fileListContainer.innerHTML = "";

            if (path) {
                fileListContainer.innerHTML += `<li class="folder" onclick="loadFiles('')">‚¨Ö Back</li>`;
            }

            items.forEach(item => {
                const element = document.createElement("li");
                element.className = item.type;
                element.innerHTML = item.type === "folder" ? `üìÅ <span class="folderlink">${item.name}</span>` : `üìÑ <a href="Archive/${path ? `${path}/` : ""}${item.name}" target="_blank">${item.name}</a>`;
                element.onclick = () => {
                    if (item.type === "folder") {
                        loadFiles(path ? `${path}/${item.name}` : item.name);
                    }
                };
                fileListContainer.appendChild(element);
            });
        }

        fetchFileList();
    </script>
</body>
</html>
